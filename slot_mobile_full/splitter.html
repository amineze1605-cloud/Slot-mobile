<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Spritesheet Splitter</title>
  <style>
    body{margin:0;background:#0b1220;color:#fff;font-family:system-ui;padding:16px}
    h1{font-size:18px;margin:0 0 12px}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    .card{background:#111827;border:2px solid #f2b632;border-radius:14px;padding:10px}
    img{width:100%;height:auto;display:block;background:repeating-conic-gradient(#333 0 25%, #222 0 50%) 50%/20px 20px;border-radius:10px}
    .meta{margin-top:8px;font-size:14px;opacity:.9;display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap}
    a{color:#f2b632;text-decoration:none}
  </style>
</head>
<body>
  <h1>Découpe automatique – long press sur une image → “Enregistrer l’image”</h1>
  <div id="grid" class="grid"></div>

<script>
const xs = [0, 341, 682, 1024];      // IMPORTANT : 682 (pas 683)
const ys = [0, 256, 512, 768, 1024];

const positions = [
  [0,0],[1,0],[2,0],
  [0,1],[1,1],[2,1],
  [0,2],[1,2],[2,2],
  [0,3],[1,3],[2,3],
];

const grid = document.getElementById("grid");
const img = new Image();
img.src = "assets/spritesheet.png";
img.onload = () => {
  positions.forEach(([c,r], i) => {
    const sx = xs[c], sy = ys[r];
    const sw = xs[c+1]-sx, sh = ys[r+1]-sy;

    const canvas = document.createElement("canvas");
    canvas.width = sw; canvas.height = sh;
    const ctx = canvas.getContext("2d");
    ctx.drawImage(img, sx, sy, sw, sh, 0, 0, sw, sh);

    const url = canvas.toDataURL("image/png");

    const card = document.createElement("div");
    card.className = "card";
    const im = document.createElement("img");
    im.src = url;

    const meta = document.createElement("div");
    meta.className = "meta";
    meta.innerHTML = `<span>symbol_${i}.png</span>
                      <a href="${url}" target="_blank" rel="noopener">Ouvrir</a>`;

    card.appendChild(im);
    card.appendChild(meta);
    grid.appendChild(card);
  });
};
img.onerror = () => alert("Impossible de charger assets/spritesheet.png");
</script>
</body>
</html>